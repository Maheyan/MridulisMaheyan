var wz={ca:0,cp:null,inum:1,nup:0,ra:1,rr:null,sam:null,vs:null,vsx:null};wz.i=[];wz.n={ctl:"console",ch:"cheight",cw:"cwidth",cp:"showCropper",cc:"cancelCrop",cu:"undo",ci:"crop",ed:"editor",lot:"bulk",sd:"saveToggle",dim:"dimensions",rb:"rctl",rr:"rr",rl:"rl",mod:"thumbnails",up:"upload",ub:"uploadb",act:"actions",mh:"mh",ms:"ms",mw:"mw",ho:"ho",wo:"wo",os:"os",etools:"editorTools",ctools:"cropTools",zi:"zoomIn",zo:"zoomOut",od:"odx"};wz.loc=["Display Save","Save Off","show controls to save images","","<a href='https://google.com/chrome/'>Chrome</a> or <a href='https://mozilla.org/'>Firefox</a>","Please upgrade your browser to use this feature","try","Loaded Images","Unable to initialise the editor","Resizing...","Apply to All","unable to initialise the api","Load Images","Editing.."];wz.s={bc:"#050302",dc:"#FF0000",sr:"#d5000f",err:"errMsg",gc:"#555555",hc:"#FFFFFF",ok:"#008000",ic:"#444444",si:"sion fa-arrow-circle-down",sif:"sioff",sid:"sidown fa-arrow-circle-down",th:"thumb",td:"thumbDelete"};wz.type={h:"h",w:"w",e:"e",d:"d",m:"m",o:"o",s:"s",t:"t",j:"image/jpeg",jx:".jpg",sid:"sample"};wz.lc=0;wz.rc=0;wz.rgs=[];wz.rg={d:0,p:1,n:2,s:3,w:4,e:5,nw:6,ne:7,sw:8,se:9,c:10};wz.rgl=11;wz.x={};wz.lb={};wz.ld={};wz.p={};wz.c={bd:0,frs:1,ie:0,ms:0,op:.7,save:0,time:null,touch:0,init:0,b:{},d:{ch:{v:20,by:3,mn:20,mx:1e3},cw:{v:20,by:3,mn:20,mx:1e3},sharp:{v:10,by:5,mn:0,mx:100},size:{v:600,by:5,mn:20,mx:1e3},opt:{v:80,by:5,mn:10,mx:100}}};wz.et={ch:"ch",cw:"cw",opt:"opt",sharp:"sharp",size:"size"};wz.api={sample:"sample/sample.jpg",sampleSize:52767};wz.lb.slc=function(){wz.lc=Date.now()};wz.lb.srd=function(){wz.rc=Date.now()};wz.lb.lcf=function(){wz.lb.slc();wz.rc=Date.now()-10};wz.lb.tix=function(x){if(x&&x.style){x.style.outline=0}};wz.lb.bb=function(d,c){if(d&&d.style&&c){d.style.borderBottomColor=c}};wz.lb.hide=function(x){if(x&&x.style){x.style.display="none"}};wz.lb.show=function(x){if(x&&x.style){x.style.display="inline"}};wz.lb.istop=function(){try{window.clearInterval(wz.c.time)}catch(e){}};wz.lb.rc=function(x,c){if(!(x&&x.id===wz.n.mod.id||x.id===wz.n.ed.id)){return}var c=x.childNodes;if(c){for(var i=c.length-1;i>=0;i--){if(x.id===wz.n.ed.id&&c&&c[i].id===wz.p.s.cv){continue}var y=x.removeChild(c[i])}}};wz.lb.srr=function(ic){wz.rr=ic};wz.lb.pi=function(v){var z=parseInt(v);if(!z||z<0)z=0;return z};wz.lb.si=function(x){if(x){var z=wz.lb.bid(wz.type.o,x);if(wz.lb.iss(z)){return 1}}return 0};wz.lb.iss=function(x){var m=x.match(/sample/);if(m){return 1}return 0};wz.lb.b=function(x){if(x===true||x===false||x===0||x===1){return 1}return 0};wz.lb.ce=function(){if(wz.lc>=wz.rc){return 1}return 0};wz.utf="Ãºtf";wz.x.spc=function(f){if(f&&f.length>0){return f.replace(/[\*|>|<|\\|\/|=|'|"|:|;|,]/g,"-")}return null};wz.lb.bid=function(t,id){var s=null;if(t&&id&&id.length>1){s=t+id.substr(1)}return s};wz.lb.ib=function(x,l,u){var v=wz.lb.pi(x);var lv=wz.lb.pi(l);var uv=wz.lb.pi(u);if(v>=0&&lv>=0&&uv>=0){if(v>=lv&&v<=uv){return 1}}return 0};wz.lb.ov=function(v){var n=-1;if(v>0){n=v/100}return n};wz.lb.mxv=function(x,y){if(x>0&&y>0){if(x>y){return x}return y}return 0};wz.lb.px=function(x){var s=-1;if(x&&x.length>2){s=x.substr(0,x.length-2)}return s};wz.lb.ss=function(x,w,h){if(w>0&&h>0&&x&&x.style){x.style.width=w.toString()+"px";x.style.height=h.toString()+"px";return 1}return 0};wz.lb.vet=function(x){for(var k in wz.et){if(wz.et[k]===x){return 1}}return 0};wz.lb.vt=function(x){if(x===wz.type.m||x===wz.type.o||x===wz.type.d||x==wz.type.e){return 1}return 0};wz.lb.vev=function(x){if(x&&x.hasOwnProperty("opt")){return 1}return 0};wz.lb.vic=function(x){if(x&&x.hasOwnProperty("fm")){return 1}return 0};wz.lb.vim=function(x){if(x&&(x.tagName==="img"||x.tagName==="IMG")){return 1}return 0};wz.lb.vin=function(n){var x=!isNaN(parseInt(n))&&isFinite(n);return x};wz.lb.jfs=function(l){var n=-1;if(l>23){n=((l-23)*3/4/1024).toFixed(1)}return n};wz.lb.o=function(v,vm,om){var o=-1;if(v>0&&vm>0&&om>0&&v<=vm){o=Math.round(om/(vm/v));if(o>om){o=-1}}return o};wz.lb.zc=function(c,w,h){if(c&&c.width&&w>0&&h>0){c.width=w;c.height=h;return 1}return 0};wz.x.doca=function(t,f){document.body.addEventListener(t,f,false)};wz.x.docr=function(t,f){document.body.removeEventListener(t,f,false)};wz.x.wina=function(t,f){window.addEventListener(t,f,false)};wz.x.winr=function(t,f){window.removeEventListener(t,f,false)};wz.x.acp=function(){wz.n.cp.addEventListener("click",wz.x.ecp,false);wz.n.cu.addEventListener("click",wz.x.cpu,false);wz.x.as0();wz.ld.be()};wz.x.rcp=function(){wz.n.cp.removeEventListener("click",wz.x.ecp,false);wz.n.cu.removeEventListener("click",wz.x.cpu,false);wz.ld.ber()};wz.x.cpea=function(){wz.n.ci.addEventListener("click",wz.x.cpit,false);wz.n.cc.addEventListener("click",wz.x.ecp2,false);wz.n.zi.addEventListener("mousedown",wz.x.zid,false);wz.n.zi.addEventListener("mouseup",wz.x.zu,false);wz.n.zo.addEventListener("mousedown",wz.x.zod,false);wz.n.zo.addEventListener("mouseup",wz.x.zu,false);wz.ld.bec()};wz.x.cper=function(){wz.n.ci.removeEventListener("click",wz.x.cpit,false);wz.n.cc.removeEventListener("click",wz.x.ecp2,false);wz.n.zi.removeEventListener("mousedown",wz.x.zid,false);wz.n.zi.removeEventListener("mouseup",wz.x.zu,false);wz.n.zo.removeEventListener("mousedown",wz.x.zod,false);wz.n.zo.removeEventListener("mouseup",wz.x.zu,false);wz.ld.becr()};wz.x.as0=function(){wz.n.lot.onmousedown=function(e){if(wz.i.length>0){this.onmouseup=function(){wz.x.fd()}}}};wz.x.aup=function(x){if(!wz.c.frs)return;function z(t,f){if(x){wz.n.up.addEventListener(t,f,false)}else{wz.n.up.removeEventListener(t,f,false)}}wz.x.upt(x);z("dragover",wz.up.ev);z("dragleave",wz.up.ev);z("drop",wz.up.ld);z("click",wz.up.ck);z("change",wz.up.ld)};wz.err=function(x,c){return};wz.lb.d=function(id){var x=wz.lb.gi(id);if(x>=0&&x<wz.i.length){wz.i.splice(x,1);return 1}return 0};wz.lb.ad=function(x){if(wz.lb.vic(x)){if(wz.lb.iss(x.k)){return 0}var z=wz.i.push(x);return z}return 0};wz.lb.gi=function(id){if(id){for(var j=0;j<wz.i.length;++j){if(wz.i[j].k===id){return j}}}return-1};wz.lb.gid=function(id){if(id){for(var j=0;j<wz.i.length;++j){if(wz.i[j].k===id){return wz.i[j]}}}return null};wz.lb.gic=function(id){if(wz.lb.iss(id)){return wz.sam}else{var ic=wz.lb.gid(id);if(ic){if(wz.lb.vic(ic)){return ic}}}return null};wz.lb.rt=function(id){var cc=wz.rr;var ni=wz.sam;var ix=wz.lb.gi(id);var ic=wz.lb.gic(id);if(ic&&ix>=0){if(wz.lb.iss(id)){return 1}if(wz.i.length===1){wz.sam.ev.gc(wz.sam.wx,wz.sam.hx,wz.dev);wz.sam.ri=0;wz.ld.sm(wz.sam,1,1)}else if(cc.k===id){ni=wz.lb.nxt(ix);if(!ni){return 0}wz.x.dsp(ni)}ic.t.parentNode.removeChild(ic.t);if(wz.lb.d(id)){return 1}}return 0};wz.lb.nxt=function(x){var n=x+1;if(n>=wz.i.length){n=0}return wz.i[n]};wz.lb.nxt0=function(x){var n=x-1;if(x===0){n=wz.i.length-1}return wz.i[n]};wz.p.xcp=function(){var x=document.getElementById(wz.cp.cv.id);if(x){var z=x.parentNode.removeChild(x);return z}return null};wz.p.ebh=function(){wz.lb.hide(wz.n.sd);wz.lb.hide(wz.n.lot);wz.lb.hide(wz.n.etools);wz.lb.hide(wz.n.cp);wz.lb.hide(wz.n.cu);wz.x.rcp();wz.lb.rote(wz.rr.di,0)};wz.p.ebs=function(){if(wz.act&&!wz.lb.iss(wz.rr.k)&&wz.c.save!==0){wz.lb.show(wz.n.sd)}wz.lb.show(wz.n.lot);wz.lb.show(wz.n.etools);wz.lb.show(wz.n.cu);wz.lb.show(wz.n.cp);wz.x.acp()};wz.p.cbh=function(){wz.lb.hide(wz.n.zi);wz.lb.hide(wz.n.zo);wz.lb.hide(wz.n.ctools);wz.lb.hide(wz.n.cc);wz.lb.hide(wz.n.ci);wz.lb.show(wz.n.cu);wz.x.cper()};wz.p.cbs=function(){wz.lb.hide(wz.n.sd);wz.lb.hide(wz.n.lot);wz.lb.hide(wz.n.cu);wz.lb.show(wz.n.zi);wz.lb.show(wz.n.zo);wz.lb.show(wz.n.ctools);wz.lb.show(wz.n.ci);wz.lb.show(wz.n.cc);wz.x.cpea()};wz.p.toc=function(){wz.p.cbh();wz.p.ebs();wz.p.xcp();wz.act=0};wz.p.cp01=function(e,a){var ic=arguments[0];var d=arguments[1];var xr=arguments[2];wz.ro.sdv(d,ic,xr.w,xr.h);wz.p.toc();wz.x.sim(ic.m,ic.k)};wz.p.cp02=function(e,a){var ic=arguments[0];ic.ph=ic.po.height;ic.pw=ic.po.width;ic.da();wz.ld.cd02(ic,wz.type.e);wz.ra=1};wz.p.dcp=function(ic,d,im,zr,xr,dw,dh,f,zz,c,cx){if(!c){c=document.createElement("canvas");cx=c.getContext("2d")}wz.lb.zc(c,dw,dh);try{cx.drawImage(im,zr.x1,zr.y1,zr.w,zr.h,0,0,dw,dh)}catch(e){}d.onload=function(){f.apply(null,[ic,d,xr])};try{d.src=c.toDataURL(wz.type.j,1)}catch(e){}};wz.p.cpx=function(ic){var im=ic.e;var zr=wz.p.srs(ic,im,wz.cp.xr);var di=document.createElement("img");wz.p.dcp(ic,di,im,zr,wz.cp.xr,wz.cp.xr.w,wz.cp.xr.h,wz.p.cp01);wz.p.dcp(ic,ic.po,ic.o,ic.co,wz.cp.xr,ic.wx,ic.hx,wz.p.cp02)};wz.x.cpit=function(){var w=wz.cp.xr.w;var h=wz.cp.xr.h;if(w<wz.c.d.cw.mn||w>wz.c.d.cw.mx||h<wz.c.d.ch.mn||h>wz.c.d.ch.mx){return 0}wz.p.cpx(wz.rr)};wz.x.ecp=function(){wz.p.ebh();wz.p.cbs();wz.act=1;wz.cp=new wz.cob(wz.rr.wm,wz.rr.hm);wz.cp.init()};wz.x.ecp2=function(){if(wz.act){wz.p.toc();wz.x.sim(wz.rr.m,wz.rr.k)}};wz.x.cpu=function(){var ic=wz.rr;if(wz.act){wz.p.toc()}ic.ri=0;ic.co=new wz.rect(0,0,0,0);var w=wz.c.d.size.v;var a=wz.et.size;var mx=wz.c.d.size.mx;var mn=wz.c.d.size.mn;ic.hx=ic.ohx;ic.wx=ic.owx;var h=ic.ovv(a,w,mn,mx);if(h>0){ic.ev.w=w;ic.ev.h=h}else{ic.ev.w=ic.wx;ic.ev.h=ic.hx}ic.ev.opt=wz.c.d.opt.mx;ic.ev.sharp=wz.c.d.sharp.mn;if(!ic.ev.sav()){return 0}wz.ld.sm(ic,1,1);wz.ra=1};wz.x.fd=function(){var ev=wz.rr.ev;for(var j=0;j<wz.i.length;++j){var y=wz.i[j];var rr=false;y.ev.gc(y.wx5(),y.hx5(),ev,rr);wz.ld.sm(y,0,1)}};wz.x.as=function(x,y){if(!(x&&x.style)){return 0}if(y===1){x.innerHTML=wz.loc[9]}else if(y===0){x.innerHTML=wz.loc[10]}};wz.x.slde=function(){wz.n.sd.addEventListener("touchend",function(e){e.preventDefault();wz.x.sld()});wz.n.sd.addEventListener("click",wz.x.sld,false)};wz.x.sld=function(e){if(!(wz.c.save===1||wz.c.save===2)){return}var h=wz.loc[1];var t=wz.loc[3];var n=2;var c=wz.c.save;wz.n.sd.style.outline=0;if(c===2){n=1;h=wz.loc[0];t=wz.loc[2]}wz.c.save=n;wz.n.sd.innerHTML=h;wz.n.sd.title=t;wz.lb.lo(n)};wz.x.slk=function(x){if(wz.lb.iss(x)||wz.c.save===0){wz.lb.hide(wz.n.sd);return}if(!wz.act)wz.lb.show(wz.n.sd);wz.x.slde()};wz.x.svdl=function(n){this.className=wz.s.sid};wz.x.sv10=function(n){this.className=wz.s.sid;var id=wz.lb.bid(wz.type.o,this.id);var ic=wz.lb.gid(id);if(ic.sv.b){navigator.msSaveBlob(ic.sv.b,ic.sv.fe)}};wz.x.svc=function(x,y){if(x){var c=wz.s.si;if(y===1){c=wz.s.sif}x.className=c}};wz.lb.lo=function(c){if(!c){return}for(var j=0;j<wz.i.length;j++){wz.x.svc(wz.i[j].sv.s,c)}};wz.x.upt=function(x){var h=wz.n.up.getElementsByTagName("h2")[0];var n=13;var c=wz.s.gc;if(x){n=12;c=wz.s.hc}if(h){h.style.color=c;h.innerHTML=wz.loc[n]}};wz.ld.eu=function(m){if(!m){m="an error has occured"}var n=document.getElementById(wz.n.up);if(n){n.innerHTML="<p class='"+wz.s.err+"'>"+m+"</p>"}else{console.log(m)}};wz.ld.cl=function(){wz.lb.show(wz.n.dim);wz.x.aup(1);wz.x.acp();return 1};wz.e={};wz.e.btd=function(e,a,t){if(!((t===1||t===-1)&&wz.lb.vet(a))){return}wz.c.bd=1;if(wz.c.time){wz.lb.istop()}var ic=wz.rr;ic.dt();var o=wz.c.b[a];wz.x.vs(o.i,0);var b=o.by;var mx=o.mx;var mn=o.mn;var by=b*t;var z=t;var vp=wz.type.w;var v=0;function doit(a,init,v1,v2){if(a===wz.et.size){ic.ev.swh(v2,v1);wz.lb.ss(ic.e,v2,v1);if(init){wz.x.di(ic.e)}ic.dm();o.i.value=wz.lb.pi(v2)}else if(a===wz.et.opt){ic.ev.opt=v1;o.i.value=wz.lb.pi(v1)}else if(a===wz.et.sharp){ic.ev.sharp=v1;o.i.value=wz.lb.pi(v1)}}function act(ic,val){var ov=-1;v=wz.lb.pi(ic.ev[vp])+val;ov=ic.ovv(a,v,mn,mx);if(ov>=0){doit(a,0,ov,v)}else{wz.lb.istop();ic=null;o=null}}if(a===wz.et.opt){vp=wz.et.opt}else if(a===wz.et.sharp){vp=wz.et.sharp}v=wz.lb.pi(ic.ev[vp])+by;var nv=ic.ovv(a,v,mn,mx);if(nv>0){doit(a,1,nv,v)}else{ic=null;o=null;return}var st=setTimeout(function(){if(wz.c.bd){wz.c.time=window.setInterval(function(){if(wz.c.bd){if(a===wz.et.opt||a===wz.et.sharp){act(ic,by)}else{for(var i=0;i<b;++i){act(ic,z)}}}},10)}},90)};wz.e.btu=function(e,a){var ef=0;wz.ra=1;wz.lb.slc();wz.c.bd=0;wz.lb.istop();if(a===wz.et.opt){ef=1}if(!wz.ld.sm(wz.rr,1,ef)){}};wz.ld.be=function(){for(var k in wz.c.b){if(k===wz.et.cw||k===wz.et.ch){continue}if(wz.c.b[k]){wz.c.b[k].ee()}else{return 0}}return 1};wz.ld.bec=function(){for(var k in wz.c.b){if(wz.c.b[k]&&k===wz.et.cw||k===wz.et.ch){wz.c.b[k].ek()}}return 1};wz.ld.ber=function(){for(var k in wz.c.b){if(wz.c.b[k]&&k!==wz.et.cw&&k!==wz.et.ch){wz.c.b[k].eer()}else{return 0}}return 1};wz.ld.becr=function(){for(var k in wz.c.b){if(wz.c.b[k]&&k===wz.et.cw&&k===wz.et.ch){wz.c.b[k].ekr()}else{return 0}}return 1};wz.ld.bera=function(){if(!wz.ld.bere())return 0;if(!wz.ld.berc())return 0;return 1};wz.bo=function(){this.et="";this.p=document.createElement("div");this.by=5;this.mn=0;this.mx=wz.c.d.size.mx;this.up=document.createElement("span");this.down=document.createElement("span");this.i=document.createElement("input")};wz.bo.prototype.ee=function(){this.up.onmouseout=function(e){this.blur();if(wz.c.bd){wz.e.btu(e,this.parentNode.id)}};this.down.onmouseout=function(e){this.blur();if(wz.c.bd){wz.e.btu(e,this.parentNode.id)}};this.up.onmousedown=function(e){wz.lb.tix(this);var p=this.parentNode.id;wz.e.btd(e,p,1)};this.up.onmouseup=function(e){this.blur();wz.e.btu(e,this.parentNode.id)};this.down.onmousedown=function(e){wz.lb.tix(this);wz.e.btd(e,this.parentNode.id,-1)};this.down.onmouseup=function(e){this.blur();wz.e.btu(e,this.parentNode.id)};this.ek()};wz.bo.prototype.ek=function(){this.i.oninput=function(e){wz.x.ku(e,this)}};wz.bo.prototype.ekr=function(){this.i.oninput=function(){}};wz.bo.prototype.eer=function(){this.up.onmouseout=function(){};this.down.onmouseout=function(){};this.up.onmousedown=function(){};this.up.onmouseup=function(){};this.down.onmousedown=function(){};this.down.onmouseup=function(){};this.i.oninput=function(){}};wz.evc=function(){this.w=wz.c.d.size.v;this.h=0;this.d=wz.type.w;this.opt=wz.c.d.opt.v;this.sharp=wz.c.d.sharp.v};wz.dev=new wz.evc;wz.bo.prototype.siv=function(v){if(!wz.lb.vin(v)){return 0}this.i.value=wz.lb.pi(v);return 1};wz.evc.prototype.ws=function(){var w=this.w.toString()+"px";return w};wz.evc.prototype.hs=function(){var h=this.h.toString()+"px";return h};wz.evc.prototype.swh=function(w,h){if(!(w>0&&h>0)){return 0}this.w=w;this.h=h;return 1};wz.evc.prototype.sav=function(){for(var k in wz.et){if(k===wz.et.ch||k===wz.et.cw)continue;var x=wz.c.b[k];if(!(x&&x.i)){return 0}if(k===wz.et.size){if(!x.siv(this.w)){return 0}}else{if(!x.siv(this[k])){return 0}}}return 1};wz.evc.prototype.gc=function(wx,hx,nev){if(!(wx>0&&hx>0&&wz.lb.vev(nev))){return 0}var w=nev.w;var h=0;if(!wz.lb.ib(w,wz.c.d.size.mn,wx)){w=wx}h=wz.lb.o(w,wx,hx);if(h<=0){w=wx;h=hx}this.h=h;this.w=w;this.d=wz.type.w;this.opt=nev.opt;this.sharp=nev.sharp;return 1};wz.evc.prototype.bk=function(x){if(!wz.lb.vev(x)){return 0}for(var k in x){this[k]=x[k]}return 1};wz.sv=function(){this.s=document.createElement("a");this.b=null;this.f="";this.fe=""};wz.ci=function(o){this.k="";this.o=o;this.h=o.height;this.w=o.width;this.po=document.createElement("img");this.ph=0;this.pw=0;this.hx=0;this.wx=0;this.ohx=0;this.owx=0;this.eh=0;this.ew=0;this.om=0;this.fm=0;this.hm=0;this.wm=0;this.ri=0;this.m=document.createElement("img");this.e=document.createElement("img");this.t=document.createElement("span");this.di="";this.co=new wz.rect(0,0,0,0);this.sv=new wz.sv;this.ev=new wz.evc;this.addi=0;this.addt=0};wz.ci.prototype.wx5=function(){if(this.ri===.5||this.ri===1.5)return this.hx;return this.wx};wz.ci.prototype.hx5=function(){if(this.ri===.5||this.ri===1.5)return this.wx;return this.hx};wz.ci.prototype.o5w=function(){if(this.ri===.5||this.ri===1.5)return this.h;return this.w};wz.ci.prototype.o5h=function(){if(this.ri===.5||this.ri===1.5)return this.w;return this.h};wz.ci.prototype.sf=function(f){var x=wz.x.spc(f);if(!x){return 0}var s=x.split(".");var t="";for(i=0;i<s.length-1;++i){t=t+s[i];if(i<s.length-2){t=t+"."}}this.sv.f=t;t=t+"-opt"+".jpg";this.sv.fe=t;return 1};wz.ci.prototype.ssr=function(x){this.sv.s.href=x};wz.ci.prototype.dd=function(){wz.n.wo.innerHTML=wz.lb.pi(this.w);wz.n.ho.innerHTML=wz.lb.pi(this.h);wz.lb.show(wz.n.od)};wz.ci.prototype.dm=function(){wz.n.mw.innerHTML=wz.lb.pi(this.ev.w);wz.n.mh.innerHTML=wz.lb.pi(this.ev.h)};wz.ci.prototype.dmx=function(w,h){wz.n.mw.innerHTML=wz.lb.pi(w);wz.n.mh.innerHTML=wz.lb.pi(h)};wz.ci.prototype.os=function(x){if(x>=0){this.om=(x/1024).toFixed(1);return 1}return 0};wz.ci.prototype.ds=function(){var c=wz.s.dc;if(parseFloat(this.fm)<=parseFloat(this.om)){c=wz.s.ok}wz.n.ms.style.color=c;wz.n.ms.innerHTML=this.fm+"kb"};wz.ci.prototype.dt=function(){wz.n.ms.style.color=wz.s.gc;wz.n.ms.innerHTML="..."};wz.ci.prototype.od=function(){wz.n.os.innerHTML="("+this.om+"kb) "};wz.ci.prototype.odp=function(){wz.n.os.innerHTML="(cropped) "};wz.ci.prototype.df=function(){wz.n.fn.innerHTML=this.f};wz.ci.prototype.da=function(){this.dm();this.ds();if(this.co.w>0){this.dd();this.odp()}else{this.dd();this.od()}};wz.ci.prototype.rr=function(){wz.rr=this};wz.ci.prototype.ovv=function(a,v,mn,mx){var rv=-1;var wx=this.wx5();var hx=this.hx5();if(this.co.w>0){wx=this.pw;hx=this.ph;if(this.ri===.5||this.ri===1.5){wx=this.ph;hx=this.pw}}if(a===wz.et.size){var w=v;var h=wz.lb.o(w,wx,hx);if(h!==-1){if(!wz.lb.ib(h,mn,hx)||!wz.lb.ib(w,mn,wx)){h=-1}}rv=h}else if(wz.lb.ib(v,mn,mx)){rv=v}return rv};wz.up={};wz.up.mn=function(){wz.nup-=1;if(wz.nup<=0){wz.nup=0;wz.x.upt(1)}};wz.up.pn=function(n){wz.nup=wz.nup+n;wz.x.upt(0)};wz.up.pz=function(f){if(f.type.indexOf("image")===0&&(f.type==="image/jpg"||f.type==="image/jpeg"||f.type==="image/png")){var reader=new FileReader;reader.onload=function(e){wz.ld.add(e.target.result,1,f.size,f.name)};reader.readAsDataURL(f)}else{wz.up.mn()}};wz.up.ld=function(e){wz.up.ev(e);var files=e.target.files||e.dataTransfer.files;wz.up.pn(files.length);for(var i=0,f;f=files[i];++i){wz.up.pz(f)}};wz.up.ev=function(e){e.stopPropagation();e.preventDefault();e.target.className="";if(e.type==="dragover"){e.target.className="dh"}};wz.up.ck=function(e){wz.n.ub.click()};wz.arr=[];wz.ro={};wz.ro.dc=function(im,i,w,h,ev){var rc=document.createElement("canvas");var rcx=rc.getContext("2d");var ov=wz.lb.ov(ev.opt);var sv=ev.sharp;wz.lb.zc(rc,w,h);try{rcx.drawImage(im,0,0);i.src=rc.toDataURL(wz.type.j,ov)}catch(e){return 0}wz.lb.zc(rc,5,5);rc=null;rcx=null;return 1};wz.ro.ri=function(s,d,w,h,r,ev,t,ss,f,p,c,cx){var x=0;var y=0;var nw=w;var nh=h;if(!c){c=wz.vs;cx=wz.vsx}if(r===.5){if(p&&f){if(t===wz.type.e){nw=h;nh=w}else{var d1=w;w=h;h=d1}}else if(!f||p){nw=h;nh=w}else{var d1=w;w=h;h=d1}x=h;y=0}else if(r===1){x=w;y=h}else if(r===1.5){if(p&&f){if(t===wz.type.e){nw=h;nh=w}else{var d1=w;w=h;h=d1}}else if(!f||p){nw=h;nh=w}else{var d1=w;w=h;h=d1}x=0;y=w}else{return 0}var i=document.createElement("img");wz.x.rcx(s,w,h,x,y,r);i.onload=function(){wz.ro.dc(i,d,nw,nh,ev);if(ss){wz.lb.ss(d,nw,nh)}};wz.x.scx(i,ev,nw,nh)};wz.ro.ab=function(){wz.ra=0;wz.lb.srd();wz.arr=[];var ic=wz.rr;var r=0;var x=0;var y=0;var w=wz.ro.mdw(ic);var h=wz.ro.mdh(ic);var ov=wz.lb.ov(ic.ev.opt);for(var i=0;i<4;++i){wz.arr[i]=document.createElement("img")}var im=ic.o;if(ic.co.w>0){im=ic.po}wz.x.dcx(im,w,h);wz.x.scx(wz.arr[0],ic.ev,w,h);wz.lb.ss(wz.arr[0],w,h);var im=ic.o;if(ic.co.w>0){im=ic.po}var m=wz.type.m;wz.ro.ri(im,wz.arr[1],w,h,.5,ic.ev,m,1,0,ic.co.w);wz.ro.ri(im,wz.arr[2],w,h,1,ic.ev,m,1,0,ic.co.w);wz.ro.ri(im,wz.arr[3],w,h,1.5,ic.ev,m,1,0,ic.co.w)};wz.ro.mdw=function(ic){var w=ic.wm;if(ic.ri===.5||ic.ri===1.5){w=ic.hm}return w};wz.ro.mdh=function(ic){var h=ic.hm;if(ic.ri===.5||ic.ri===1.5){h=ic.wm}return h};wz.ro.ad=function(r){function x(i){var w=wz.lb.px(wz.arr[i].style.width);var h=wz.lb.px(wz.arr[i].style.height);ic.ri=r;wz.ro.sdv(wz.arr[i],ic,w,h);wz.x.sim(wz.arr[i],ic.k,1);if(!wz.ld.cd02(ic,wz.type.e)){return 0}}var ic=wz.rr;if(r===0){x(0)}else if(r===.5){x(1)}else if(r===1){x(2)}else if(r===1.5){x(3)}else{return}if(wz.c.touch){wz.ro.sh()}};wz.ro.sh=function(){wz.lb.show(wz.n.rb);if(wz.ra===1){wz.ro.ab()}};wz.ro.ax=function(e,d){if(d!==-1&&d!==1){return}var ri=wz.rr.ri;var r=ri+.5*d;if(r===2){r=0}else if(r<0){r=1.5}wz.ro.ad(r)};wz.x.rev=function(){wz.n.rr.onclick=function(e){wz.ro.ax(e,1)};wz.n.rl.onclick=function(e){wz.ro.ax(e,-1)}};wz.lb.rote=function(pid,t){wz.lb.hide(wz.n.rb);if(!pid){return 0}var p=document.getElementById(pid);if(!p){return 0}function f99(){wz.ro.sh();wz.x.rev()}function tgr(){if(wz.n.rb.style.display==="none"){f99()}else{wz.lb.hide(wz.n.rb)}}if(t){if(wz.c.touch){wz.n.ctl.onclick=function(e){wz.lb.hide(wz.n.rb)}}else{wz.n.ctl.onmouseover=function(e){wz.lb.hide(wz.n.rb)}}if(wz.c.touch){p.onclick=function(e){tgr()}}else{p.onmouseover=function(e){f99()}}wz.n.rb.onmouseover=function(e){wz.ro.sh()};p.onmouseout=function(e){wz.lb.hide(wz.n.rb)}}else{if(wz.c.touch){wz.n.ctl.onclick=function(){}}else{wz.n.ctl.onmouseover=function(){}}if(wz.c.touch){p.onclick=function(){}}else{p.onmouseover=function(){}}wz.n.rb.onmouseover=function(){};p.onmouseout=function(){}}return 1};wz.x.dcx=function(z,w,h,c,cx){if(!wz.lb.vim(z)){return 0}if(!c){c=wz.vs;cx=wz.vsx}if(!wz.lb.zc(c,w,h)){return 0}try{cx.drawImage(z,0,0,w,h)}catch(e){return 0}return 1};wz.x.rcx=function(z,w,h,x,y,r,c,cx){var m=wz.lb.mxv(w,h);if(!m){return 0}var ri=r*Math.PI;if(!(wz.lb.vim(z)&&x>=0&&y>=0&&r>0)){return 0}if(!c){c=wz.vs;cx=wz.vsx}if(!wz.lb.zc(c,2*m,2*m)){return 0}try{cx.translate(x,y);cx.rotate(ri);cx.drawImage(z,0,0,w,h)}catch(e){return 0}return 1};wz.x.scx=function(x,ev,w,h,c,cx){var v=wz.lb.ov(ev.opt);if(!(wz.lb.vim(x)&&v>0)){return 0}if(!c){c=wz.vs;cx=wz.vsx}try{wz.x.shp(x,ev,w,h,c,cx)}catch(e){return 0}return 1};wz.x.di=function(x,ra){var n=0;var z=null;var c=wz.n.ed.childNodes;if(!c){return 0}if(!wz.lb.vim(x)){return 0}n=c.length;if(n===1&&x.k!==wz.p.s.cv){z=wz.n.ed.replaceChild(x,c[0])}else{if(n>0){wz.lb.rc(wz.n.ed,wz.act);c=wz.n.ed.childNodes;if(!c&&!wz.act){return 0}n=c.length}if(n===0||wz.act){z=wz.n.ed.appendChild(x);if(wz.cp){wz.cp.cr.w=wz.rr.wm;wz.cp.cr.h=wz.rr.hm;if(x.width>0&&x.height>0){if(wz.cp.xr.w>x.width){wz.cp.xr.w=can.lb.pi(x.width/2)}if(wz.cp.xr.h>x.height){wz.cp.xr.h=can.lb.pi(x.height/2)}if(wz.cp.xr.x2()>x.width){wz.cp.xr.x1=0}if(wz.cp.xr.y2()>x.height){wz.cp.xr.y1=0}}else{return 0}wz.cp.db()}}else{return 0}}wz.x.slk(x.id);var t=x.id.substr(0,1);if(t!==wz.type.e){if(!wz.lb.rote(x.id,1))return 0}if(ra!==1)wz.ra=1;c=null;z=null;return 1};wz.x.sim=function(im,k,ra){var d=im.cloneNode(false);if(!d){return 0}d.id=wz.lb.bid(wz.type.d,k);var x=wz.lb.bid(wz.type.o,k);var ic=wz.lb.gic(x);if(!ic){return 0}d.width=ic.wm;d.height=ic.hm;if(!wz.x.di(d,ra)){return 0}d=null;return 1};wz.x.dsp=function(ic){var cc=wz.rr;if(ic.k!==cc.k){if(!wz.lb.iss(ic.k)){wz.lb.bb(cc.m,wz.s.bc);wz.lb.bb(ic.m,wz.s.hc)}if(!ic.ev.sav()){return 0}ic.rr()}ic.da();if(wz.act){wz.lb.rote(wz.rr.di,0);wz.lb.ss(ic.e,ic.wm,ic.hm);wz.x.di(ic.e)}else{if(!wz.x.sim(ic.m,ic.k)){return 0}}return 1};wz.ro.sdv=function(im,ic,w,h){ic.wm=w;ic.hm=h;ic.addi=0;var xx=im.cloneNode(false);ic.m.src=xx.src;wz.x.mx(ic);ic.ev.swh(w,h);if(!ic.ev.sav()){return 0}ic.da()};wz.ld.add=function(i,up,z,f){if(!(i&&wz.lb.b(up))){wz.ld.addcb(up,"args")}var inum=wz.inum;wz.inum+=1;var img=document.createElement("img");img.onload=function(){if(!wz.ld.im(img,up,inum,z,f)){wz.ld.addcb(up,"im")}};try{img.src=i}catch(e){wz.ld.addcb(up,"src")}};wz.ld.addcb=function(up,err){if(!up){wz.ld.e()}};wz.x.mx=function(ic){var mn=wz.c.d.size.mn;var mx=wz.c.d.size.mx;if(!wz.lb.vic(ic)){return 0}var wo=ic.w;var ho=ic.h;if(ic.co.w>0){wo=ic.co.w;ho=ic.co.h}if(!(ho>=mn&&wo>=mn)){return 0}var dw=wo-mx;var dh=ho-mx;var wx=wo;var hx=ho;if(dh>0&&dw>0||!(dh<=0&&dw<=0)){if(dh>dw){hx=mx;wx=wz.lb.o(hx,ho,wo);if(wx<=0){return 0}}else{wx=mx;hx=wz.lb.o(wx,wo,ho);if(hx<=0){return 0}}}ic.wx=wx;ic.hx=hx;return 1};wz.ld.im=function(img,up,inum,fs,fn){function ids(ic,up,inum){if(!(wz.lb.vic(ic)&&wz.lb.b(up)&&inum>0)){return 0}if(!up&&wz.sam){return 0}var s=wz.type.sid;if(up){s=inum.toString()}ic.k=wz.type.o+s;ic.o.id=ic.k;ic.e.id=wz.type.e+s;ic.m.id=wz.type.m+s;ic.t.id=wz.type.t+s;ic.di=wz.type.d+s;ic.sv.s.id=wz.type.s+s;return 1}function ev(ic,up){if(!(wz.lb.vic(ic)&&wz.lb.b(up))){return 0}if(up){if(!ic.ev.gc(ic.wx,ic.hx,wz.rr.ev)){return 0}}else{var h=wz.lb.o(ic.ev.w,ic.w,ic.h);if(h>0){ic.ev.h=h}else{return 0}}ic.wm=ic.ev.w;ic.hm=ic.ev.h;return 1}function th(ic,up){if(!(wz.lb.vic(ic)&&wz.lb.b(up))){return 0}var td=document.createElement("p");td.className=wz.s.td;td.innerHTML="x<span class='accessibility'> - (remove image) </span>";td.tabIndex="1";td=ic.t.appendChild(td);ic.t.className=wz.s.th;ic.addt=0;if(up){ic.addt=1}if(up){te(ic,td)}if(!up){wz.lb.hide(ic.t)}td=null;return 1}function te(ic,td){td.onclick=function(e){e.preventDefault();e.stopPropagation();var id=wz.lb.bid(wz.type.o,e.currentTarget.parentNode.id);if(id){wz.lb.slc();wz.lb.rt(id)}};td.onmouseover=function(e){e.preventDefault();e.stopPropagation();var id=wz.lb.bid(wz.type.m,e.currentTarget.parentNode.id);if(id){var x=document.getElementById(id);if(x){wz.lb.bb(x,wz.s.dc)}}};td.onmouseout=function(e){if(e){e.preventDefault();e.stopPropagation();var id=wz.lb.bid(wz.type.m,e.currentTarget.parentNode.id);if(id){var x=document.getElementById(id);if(x){wz.lb.bb(x,wz.s.bc);wz.lb.bb(wz.rr.m,wz.s.hc)}}}};function ldi(e){var o=wz.lb.bid(wz.type.o,e.currentTarget.id);if(o){wz.lb.slc();var x=wz.lb.gic(o);if(x){wz.x.dsp(x)}}}ic.m.addEventListener("touchend",function(e){e.preventDefault();ldi(e)});ic.m.onclick=function(e){e.preventDefault();e.stopPropagation();ldi(e)}}function tsa(){var x=ic.sv.s;var s=ic.sv.fe;x.title="Save as:  "+s;x.href="";x.tabIndex="1";x.innerHTML="<span class='accessibility'>save : "+s+" </span>";x.setAttribute("download",s)}function ts(){if(wz.c.save===0||wz.lb.iss(ic.k)){return 1}if(wz.c.save===2){ic.sv.s.className=wz.s.si}else{ic.sv.s.className=wz.s.sif}tsa();ic.sv.s=ic.t.appendChild(ic.sv.s);if(!ic.sv.s){return 0}if(wz.c.ms){ic.sv.s.addEventListener("click",wz.x.sv10,false)}else{ic.sv.s.addEventListener("click",wz.x.svdl,false)}return 1}if(!(wz.lb.vim(img)&&wz.lb.b(up)&&inum>0)){return 0}var ic=new wz.ci(img);if(!ids(ic,up,inum)){return 0}ic.sf(fn);if(!wz.x.mx(ic)){return 0}ic.ohx=ic.hx;ic.owx=ic.wx;if(!ev(ic,up)){return 0}if(!fs){fs=0}if(!ic.os(fs)){return 0}ts(ic);ic.m=ic.t.appendChild(ic.m);ic.m.tabIndex="1";ic.m.title=ic.sv.f;ic.m.alt=ic.sv.f;if(!th(ic,up)){return 0}ic.m.onload=function(e){wz.ld.lm(e)};ic.e.onload=function(e){var x=wz.lb.bid(wz.type.o,this.id);var ic=wz.lb.gic(x);if(!ic){return 0}if(ic.co.w>0){ic.eh=ic.co.h;ic.ew=ic.co.w;if(ic.ri===.5||ic.ri===1.5){ic.eh=ic.co.w;ic.ew=ic.co.h}}else{ic.eh=ic.hx5();ic.ew=ic.wx5()}};var zz=0;if(up){zz=wz.lb.ad(ic)}else{wz.sam=ic;wz.sam.rr()}var x=1;if(up&&zz!==1){wz.lb.slc();x=0}if(!wz.ld.sm(ic,x,1)){return 0}ic.o.onload=null;ic=null;return 1};wz.ld.w=function(){function bc01(){try{if(canIE9===true||canIE9===false){wz.c.ie=canIE9}}catch(e){wz.c.ie=false}}function bc02(){if(wz.c.ie){var p=document.getElementById("warning");if(p){p.innerHTML=wz.loc[6]+" "+wz.loc[4]}}}function bc03(){if(document.addEventListener){return 1}return 0}function bc04(){if(!Date.now){Date.now=function now(){return(new Date).getTime()}}}function bc05(){if(!window.FileReader){wz.c.frs=0;wz.ld.eu(wz.loc[5])}}function bc06(){var x=document.createElement("A");if(x&&typeof x.download!="undefined"){wz.c.ms=0;wz.c.save=1}else if(navigator.msSaveBlob){wz.c.ms=1;wz.c.save=1}if(wz.c.save&&wz.api.showDownload===0)wz.c.save=0}function bc07(){try{wz.vs=document.createElement("canvas");wz.vsx=wz.vs.getContext("2d");wz.lb.zc(wz.vs,5,5);return 1}catch(e){return 0}return 0}function bc08(){if("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0){wz.c.touch=1}}function bc(){bc01();bc02();if(!bc03()){return 0}bc04();bc05();bc06();if(!bc07()){return 0}bc08();return 1}function lc01(){for(var k in wz.et){var x=null;var co=new wz.bo;var id=wz.et[k];if(!id){return 0}var dv=wz.c.d[id];if(!dv){return 0}co.et=id;co.p=document.getElementById(id);if(!co.p){return 0}co.up=co.p.getElementsByTagName("span")[0];if(wz.c.touch){wz.lb.hide(co.up)}co.down=co.p.getElementsByTagName("span")[1];if(wz.c.touch){wz.lb.hide(co.down)}if(dv.by>0){co.by=dv.by}else{return 0}if(dv.mn>=0){co.mn=dv.mn}else{return 0}if(dv.mx>0){co.mx=dv.mx}else{return 0}x=co.p.getElementsByTagName("small")[0];if(x){x.innerHTML=co.mn+" - "+co.mx;if(wz.c.touch){x.style.verticalAlign="middle";x.style.paddingBottom="7px"}}else{return 0}co.i=co.p.getElementsByTagName("input")[0];if(!co.i){return 0}if(wz.c.touch){co.i.style.marginRight=0}if(!co.siv(dv.v)){return 0}wz.c.b[id]=co;co=null;x=null}return 1}function lc02(){for(var k in wz.n){var x=document.getElementById(wz.n[k]);if(wz.c.ie&&wz.n[k]===wz.n.ub){continue}else if(x){wz.n[k]=x;x=null}else{return 0}}return 1}function lc03(){wz.lb.rc(wz.n.mod);wz.n.mod.innerHTML="<h2 class='accessibility'>"+wz.loc[7]+"</h2>"}function lc04(){wz.x.doca("drop",function(e){e.preventDefault();e.stopPropagation()},false);wz.x.doca("dragover",function(e){e.preventDefault()},false)}function lc(){if(!lc01()){return 0}if(!lc02()){return 0}lc03();lc04();wz.lb.lcf();wz.ld.add(wz.api.sample,0,wz.api.sampleSize,"sample.jpg");return 1}function ss(){for(var k in wz.api.def){for(var l in wz.api.def[k]){wz.c.d[k][l]=wz.lb.pi(wz.api.def[k][l])}}var l=0;if(wz.api.loc&&wz.api.loc.length)l=wz.api.loc.length;for(var i=0;i<l;i++){wz.loc[i]=wz.api.loc[i]}for(var k in wz.api.styles){wz.s[k]=wz.api.styles[k]}if(wz.c.d.cw.mn<wz.c.d.size.mn){wz.c.d.cw.mn=wz.c.d.size.mn}if(wz.c.d.ch.mn<wz.c.d.size.mn){wz.c.d.ch.mn=wz.c.d.size.mn}if(wz.c.d.cw.mx>wz.c.d.size.mx){wz.c.d.cw.mx=wz.c.d.size.mx}if(wz.c.d.ch.mx>wz.c.d.size.mx){wz.c.d.ch.mx=wz.c.d.size.mx}return 1}if(!ss()){wz.ld.e(wz.loc[11]);return 0}if(!bc()){wz.ld.e(wz.loc[5]);return 0}if(!lc()){wz.ld.e(wz.loc[8]);return 0}};wz.ld.sm=function(ic,ed,ef){var wo=0;var ho=0;function err(){ic.addi=0}if(!(wz.lb.vic(ic)&&wz.lb.b(ed)&&wz.lb.b(ef))){return 0}ic.addi=ed;wo=ic.wm;ho=ic.hm;if(!wz.ld.cd02(ic,wz.type.m)){ic.wm=wo;ic.hm=ho;err();return 0}if(ef){if(!wz.ld.cd02(ic,wz.type.e)){err();return 0}}return 1};wz.ld.lm=function(e){var ic=wz.rr;var id="";var cid="";if(!(e&&e.currentTarget)){wz.ld.lmcb(0);return}id=e.currentTarget.id;cid=wz.lb.bid(wz.type.o,id);if(!cid){wz.ld.lmcb(1);return}ic=wz.lb.gic(cid);if(!ic){wz.ld.lmcb(2);return}if(!wz.ld.lmo(ic)){wz.ld.lmcb(3);return}if(wz.c.save){if(wz.c.ms){var txt=ic.m.src;var a2b=atob(txt.split(",")[1]);var b=new ArrayBuffer(a2b.length);var u8=new Uint8Array(b);for(var i=0;i<a2b.length;i++){u8[i]=a2b.charCodeAt(i)&255}ic.sv.b=new Blob([b],{type:"application/octet-stream"})}else{ic.ssr(ic.m.src)}}if(!wz.ld.lmp(ic)){wz.ld.lmcb(4);return}if(!wz.ld.lmq(ic)){wz.ld.lmcb(5);return}if(!wz.ld.lmr(ic)){wz.ld.lmcb(6);return}ic=null};wz.ld.lmcb=function(x){};wz.ld.lmo=function(ic){var s=0;if(!wz.lb.vic(ic)){return 0}s=wz.lb.jfs(ic.m.src.length);if(s>0){ic.fm=s}else{return 0}return 1};wz.ld.lmp=function(ic){if(!wz.lb.vic(ic)){return 0}if(ic.addi){if(!wz.x.dsp(ic)){return 0}}return 1};wz.ld.lmq=function(ic){if(!wz.lb.vic(ic)){return 0}if(wz.init!==1){wz.ld.cl();wz.dev.bk(wz.sam.ev);wz.init=1}return 1};wz.ld.lmr=function(ic){if(!wz.lb.vic(ic)){return 0}if(ic.addt){ic.t=wz.n.mod.appendChild(ic.t);if(!ic.t){return 0}ic.addt=0;wz.up.mn()}return 1};wz.ld.cd02=function(ic,t){if(!(wz.lb.vic(ic)&&wz.lb.vt(t)))return 0;if(t!==wz.type.e&&t!==wz.type.m)return 0;var w=0;var h=0;var im=ic.m;if(t===wz.type.e){im=ic.e}var r=ic.ri;var v=wz.lb.ov(ic.ev.opt);if(v<=0)return 0;var c=document.createElement("canvas");var cx=c.getContext("2d");if(t===wz.type.m){w=ic.ev.w;h=ic.ev.h;ic.wm=w;ic.hm=h;ic.m.style.width="";ic.m.style.height=""}else if(t===wz.type.e){if(ic.co.w>0){w=ic.co.w;h=ic.co.h}else{w=ic.wx5();h=ic.hx5()}}var sim=ic.o;if(ic.co.w>0){sim=ic.po}if(r===0){if(!wz.x.dcx(sim,w,h,c,cx))return 0;wz.x.scx(im,ic.ev,w,h,c,cx)}else{wz.ro.ri(sim,im,w,h,r,ic.ev,t,0,1,ic.co.w,c,cx)}wz.lb.zc(c,5,5);return 1};wz.ld.e=function(m){var n=document.getElementById(wz.n.etools);if(n){wz.lb.hide(n)}var n=document.getElementById(wz.n.ctools);if(n){wz.lb.hide(n)}var n=document.getElementById(wz.n.act);if(n){wz.lb.hide(n)}n=document.getElementById(wz.n.dim);if(n){n.innerHTML=""}n=document.getElementById(wz.n.mod);if(n){n.innerHTML=""}n=document.getElementById(wz.n.ed);if(n){n.innerHTML=""}wz.ld.eu(m)};wz.x.vs=function(n,k){var c=wz.s.sr;if(k===0){c=wz.s.ic}if(n&&n.style)n.style.color=c};wz.x.vk=function(n,v){if(!n){return-1}var k=1;if(!wz.lb.vin(v)){k=1}else{var m=v.match(/[^0123456789]/g);if(!m){k=0}}wz.x.vs(n,k);return k};wz.x.vz=function(a,v){var mx=wz.c.b[a].mx;var mn=wz.c.b[a].mn;var x=wz.rr.ovv(a,v,mn,mx);return x};wz.x.rt=function(w,h){wz.rr.ev.swh(w,h);wz.lb.ss(wz.rr.e,w,h);wz.x.di(wz.rr.e);wz.rr.dm();if(!wz.ld.sm(wz.rr,1,0)){}};wz.x.ox=function(v){wz.rr.ev.opt=v;if(!wz.ld.sm(wz.rr,1,1)){}};wz.x.sox=function(v){wz.rr.ev.sharp=v;if(!wz.ld.sm(wz.rr,1,1)){}};wz.x.ku=function(e,n){var a=n.parentNode.id;if(!a){return}var k=e.keyCode;function sf(n){wz.c.b[n].i.focus()}if(k===40&&n.parentNode.id===wz.et.size){sf(wz.et.opt);return}if(k===40&&n.parentNode.id===wz.et.opt){sf(wz.et.sharp);return}if(k===38&&n.parentNode.id===wz.et.sharp){sf(wz.et.opt);return}if(k===38&&n.parentNode.id===wz.et.opt){sf(wz.et.size);return}var v=n.value;v=v.trim();if(wz.x.vk(n,v)){return}var h=wz.x.vz(a,v);if(h===-1){wz.x.vs(n,1);return}if(a===wz.et.ch){var rv=wz.p.krh(v);if(rv)wz.p.wch(rv)}else if(a===wz.et.cw){var rv=wz.p.krw(v);if(rv)wz.p.wcw(rv)}else if(a===wz.et.size){wz.x.rt(v,h);wz.lb.lcf()}else if(a===wz.et.opt){wz.x.ox(v);wz.lb.lcf()}else if(a===wz.et.sharp){wz.x.sox(v);wz.lb.lcf()}};wz.x.rda=function(cx,w,h){var x=null;try{x=cx.getImageData(0,0,w,h)}catch(e){x=null}return x};wz.x.cda=function(w,h){var c=document.createElement("canvas");var cx=c.getContext("2d");var r=cx.createImageData(w,h);c=null;cx=null;return r};wz.x.cvl=function(p,mx){var l=Math.round(Math.sqrt(mx.length));var lh=Math.floor(l/2);var s=p.data;var w=p.width;var h=p.height;var rd=wz.x.cda(w,h);var d=rd.data;for(var y=0;y<h;y++){for(var x=0;x<w;x++){var r=0,g=0,b=0,a=0;var doff=(y*w+x)*4;for(var cy=0;cy<l;cy++){for(var cx=0;cx<l;cx++){var scy=y+cy-lh;var scx=x+cx-lh;if(scy>=0&&scy<h&&scx>=0&&scx<w){var soff=(scy*w+scx)*4;var wt=mx[cy*l+cx];r+=s[soff]*wt;g+=s[soff+1]*wt;b+=s[soff+2]*wt;a+=s[soff+3]*wt}}}d[doff]=r;d[doff+1]=g;d[doff+2]=b;d[doff+3]=a}}return rd};wz.x.bsmx=function(v){if(v===0){return 0}var vs=-1*v/200;var vc=1-4*vs;var m=[0,vs,0,vs,vc,vs,0,vs,0];return m};wz.x.shp=function(dm,ev,w,h,c,cx){var s=ev.sharp;if(s>0){var mx=wz.x.bsmx(s);var d=wz.x.rda(cx,w,h);var data=wz.x.cvl(d,mx);try{cx.putImageData(data,0,0)}catch(e){}}var v=wz.lb.ov(ev.opt);try{dm.src=c.toDataURL(wz.type.j,v)}catch(e){}};wz.p.s={cv:"cropCanvas",z:100};wz.point=function(a,b){if(a>0)this.x=a;else this.x=0;if(b>0)this.y=b;else this.y=0};wz.cob=function(w,h){this.ar=wz.rg.d;this.off=5;this.cv=document.createElement("canvas");this.cv.style.zIndex=wz.p.s.z;this.cv.id=wz.p.s.cv;this.cx=this.cv.getContext("2d");this.cr=new wz.rect(0,0,w,h);this.xr=new wz.rect(0,0,0,0);this.posmax=new wz.point;this.mpos=new wz.point;this.opos=new wz.point;this.zv=0;this.db=function(){this.cv.width=this.cr.w;this.cv.height=this.cr.h;this.cx.globalAlpha=wz.c.op;this.cx.fillStyle=wz.s.bg;this.cx.fillRect(0,0,this.cr.w,this.cr.h);this.cx.clearRect(this.xr.x1,this.xr.y1,this.xr.w,this.xr.h)};this.dx=function(){var x=this.xr.x1-this.mpos.x;return x};this.dxx=function(){var x=this.mpos.x-(this.xr.x1+this.xr.w);return x};this.dy=function(){var x=this.xr.y1-this.mpos.y;return x};this.dyy=function(){var x=this.mpos.y-(this.xr.y1+this.xr.h);return x};this.ckx=function(){if(this.xr.x1<0)this.xr.x1=0;if(this.xr.x1>this.posmax.x)this.xr.x1=this.posmax.x};this.cky=function(){if(this.xr.y1<0)this.xr.y1=0;if(this.xr.y1>this.posmax.y)this.xr.y1=this.posmax.y};this.xy=function(){this.sx();this.sy()};this.setoff=function(){this.opos.x=this.mpos.x-this.xr.x1;this.opos.y=this.mpos.y-this.xr.y1};this.mxy=function(){this.posmax.x=this.cr.w-this.xr.w;this.posmax.y=this.cr.h-this.xr.h}};wz.cob.prototype.sx=function(x){if(x){this.xr.x1+=x}else{this.xr.x1=this.mpos.x-this.opos.x}this.ckx()};wz.cob.prototype.sy=function(y){if(y){this.xr.y1+=y}else{this.xr.y1=this.mpos.y-this.opos.y}this.cky()};wz.cob.prototype.swx=function(d,x){this.xr.w=this.xr.w+d;if(x)this.xr.x1=this.mpos.x;this.mxy()};wz.cob.prototype.shy=function(d,x){this.xr.h=this.xr.h+d;if(x)this.xr.y1=this.mpos.y;this.mxy()};wz.cob.prototype.cus=function(x){var p="default";if(x===wz.rg.p){p="pointer"}else if(x===wz.rg.n){p="n-resize"}else if(x===wz.rg.e){p="e-resize"}else if(x===wz.rg.w){p="w-resize"}else if(x===wz.rg.s){p="s-resize"}else if(x===wz.rg.nw){p="nw-resize"}else if(x===wz.rg.ne){p="ne-resize"}else if(x===wz.rg.sw){p="sw-resize"}else if(x===wz.rg.se){p="se-resize"}this.cv.style.cursor=p};wz.rect=function(ax,ay,aw,ah){this.w=aw;this.h=ah;this.x1=ax;this.y1=ay;this.x2=function(){return this.x1+this.w};this.y2=function(){return this.y1+this.h}};wz.rect.prototype.setv=function(x,y,w,h){this.x1=x;this.y1=y;this.w=w;this.h=h};wz.rect.prototype.inr=function(x,y){if(x>=this.x1&&x<=this.x2()&&y>=this.y1&&y<=this.y2())return 1;return 0};wz.p.rgi=function(){for(var i=0;i<wz.rgl;i++){wz.rgs[i]=new wz.rect}};wz.p.rgset=function(x,y,w,h,iw,ih){var rx=0;var ry=0;var rw=0;var rh=0;var o=wz.cp.off;var sq=2*o;var f=[[0,0,0,0],[x+o,y+o,w-sq,h-sq],[x+o,y-o,w-sq,sq],[x+o,y+h-o,w-sq,sq],[x-o,y+o,sq,h-sq],[x+w-o,y+o,sq,h-sq],[x-o,y-o,sq,sq],[x+w-o,y-o,sq,sq],[x-o,y+h-o,sq,sq],[x+w-o,y+h-o,sq,sq],[0,0,iw,ih]];for(var i=1;i<wz.rgl-1;i++){rx=f[i][0];ry=f[i][1];rw=f[i][2];rh=f[i][3];if(rx&&ry&&rw&&rh){wz.rgs[i].setv(rx,ry,rw,rh)}}};wz.p.rgget=function(e){var z=wz.cp;var x=z.mpos.x;var y=z.mpos.y;wz.cp.gm(e);wz.p.rgset(z.xr.x1,z.xr.y1,z.xr.w,z.xr.h,z.cr.w,z.cr.h);for(var i=1;i<wz.rgl-1;i++){if(wz.rgs[i]){var f=wz.rgs[i].inr(x,y);if(f)return i}else{return 0}}return 0};wz.p.rgdet=function(e){e.preventDefault();var ar=wz.p.rgget(e);wz.cp.ar=ar;if(ar===wz.rg.p){wz.cp.iact(ar,wz.p.dgz)}else if(ar>1&&ar<wz.rgl-1){wz.cp.iact(ar,wz.p.cpz)}else{}};wz.cob.prototype.gm=function(e){if(!e)var e=window.event;var x=0,y=0;var sl=document.body.scrollLeft+document.documentElement.scrollLeft;var st=document.body.scrollTop+document.documentElement.scrollTop;if(e.pageX||e.pageY){x=e.pageX;y=e.pageY}else if(e.clientX||e.clientY){x=e.clientX+sl;y=e.clientY+st}var rect=wz.cp.cv.getBoundingClientRect();this.cr.x1=rect.left+sl;this.cr.y1=rect.top+st;this.mpos.x=x-this.cr.x1;this.mpos.y=y-this.cr.y1;if(this.mpos.x<0)this.mpos.x=0;if(this.mpos.y<0)this.mpos.y=0};wz.p.zn=function(){var d=wz.cp.dy();wz.cp.shy(d,true)};wz.p.zs=function(){var d=wz.cp.dyy();wz.cp.shy(d,false)};wz.p.zw=function(){var d=wz.cp.dx();wz.cp.swx(d,true)};wz.p.ze=function(){var d=wz.cp.dxx();wz.cp.swx(d,false)};wz.p.flipx=function(){if(wz.cp.xr.x1>wz.cp.xr.x2()){wz.cp.xr.x1=wz.cp.xr.x2();wz.cp.xr.w=wz.cp.xr.w*-1;if(wz.cp.ar===wz.rg.w){wz.cp.ar=wz.rg.e}else if(wz.cp.ar===wz.rg.e){wz.cp.ar=wz.rg.w}if(wz.cp.ar===wz.rg.ne)wz.cp.ar=wz.rg.sw;else if(wz.cp.ar===wz.rg.nw)wz.cp.ar=wz.rg.se;else if(wz.cp.ar===wz.rg.se)wz.cp.ar=wz.rg.nw;else if(wz.cp.ar===wz.rg.sw)wz.cp.ar=wz.rg.ne}};wz.p.flipy=function(){if(wz.cp.xr.y1>wz.cp.xr.y2()){wz.cp.xr.y1=wz.cp.xr.y2();wz.cp.xr.h=wz.cp.xr.h*-1;if(wz.cp.ar===wz.rg.n){wz.cp.ar=wz.rg.s}else if(wz.cp.ar===wz.rg.s){wz.cp.ar=wz.rg.n}}};wz.p.flip=function(){if(wz.cp.ar===2||wz.cp.ar===3){wz.p.flipy()}else if(wz.cp.ar===4||wz.cp.ar===5){wz.p.flipx()}else{wz.p.flipy();wz.p.flipx()}};wz.p.cpz=function(e){e.stopPropagation();wz.cp.gm(e);wz.p.wb(wz.cp.xr.w,wz.cp.xr.h);var d=0;wz.p.flip();if(wz.cp.ar===wz.rg.n){wz.p.zn()}else if(wz.cp.ar===wz.rg.s){wz.p.zs()}else if(wz.cp.ar===wz.rg.w){wz.p.zw()}else if(wz.cp.ar===wz.rg.e){wz.p.ze()}else if(wz.cp.ar===wz.rg.nw){wz.p.zn();wz.p.zw()}else if(wz.cp.ar===wz.rg.ne){wz.p.zn();wz.p.ze()}else if(wz.cp.ar===wz.rg.sw){wz.p.zs();wz.p.zw()}else if(wz.cp.ar===wz.rg.se){wz.p.zs();wz.p.ze()}else{return 0}wz.cp.db()};wz.p.krh=function(v){var c=wz.cp;var rv=0;var h=wz.cp.cr.h;var z=h-c.xr.y1;if(!wz.act||c.xr.h===v)return;v=wz.lb.pi(v);if(v>h){v=h;rv=v;c.xr.y1=0}else if(v>z){c.xr.y1=h-v}c.xr.h=v;c.db();return rv};wz.p.krw=function(v){var c=wz.cp;var rv=0;var w=wz.cp.cr.w;var z=w-c.xr.x1;if(!wz.act||c.xr.w===v)return;v=wz.lb.pi(v);if(v>w){v=w;rv=v;c.xr.x1=0}else if(v>z){c.xr.x1=w-v}c.xr.w=v;c.db();return rv};wz.p.dgz=function(e){wz.cp.gm(e);if(wz.cp.ar===wz.rg.p){wz.cp.xy();wz.cp.db()}};wz.p.dgrw=function(e){wz.cp.delz();wz.cp.ar=wz.rg.d;wz.cp.cus(wz.rg.d);wz.cp.opos.x=0;wz.cp.opos.y=0};wz.p.dgr=function(e){wz.cp.delz();wz.cp.ar=wz.rg.d;wz.cp.cus(wz.rg.d);wz.cp.opos.x=0;wz.cp.opos.y=0};wz.p.cpn=function(e){if(!e)e=window.event();var k=e.keyCode;if(k===37){wz.cp.sx(-1)}else if(k===38){wz.cp.sy(-1)}else if(k===39){wz.cp.sx(1)}else if(k===40){wz.cp.sy(1)}else return;wz.cp.db()};wz.p.cur=function(e){var ar=wz.p.rgget(e);wz.cp.cus(ar)};wz.cob.prototype.ival=function(){this.xr.w=Math.ceil(wz.rr.wm/2);this.xr.h=Math.ceil(wz.rr.hm/2);this.xr.x1=Math.ceil(this.xr.w/2);this.xr.y1=Math.ceil(this.xr.h/2);this.zv=wz.rr.wm;wz.cp.mxy();wz.p.wb(this.xr.w,this.xr.h)};wz.cob.prototype.init=function(){wz.p.rgi();this.ival();var zz=wz.p.xcp();if(!zz)zz=wz.cp.cv;var ic=wz.rr;wz.lb.ss(ic.e,ic.wm,ic.hm);wz.x.di(ic.e);this.cv=wz.n.ed.appendChild(zz);this.cpa();this.db()};wz.cob.prototype.eadd=function(t,a){this.cv.addEventListener(t,a,false)};wz.cob.prototype.edel=function(t,a){this.cv.removeEventListener(t,a,false)};wz.cob.prototype.cpa=function(){this.eadd("mousedown",wz.p.rgdet);this.eadd("mouseup",wz.p.dgr);wz.x.wina("mouseup",wz.p.dgrw,false);this.eadd("mousemove",wz.p.cur);wz.x.doca("keydown",wz.p.cpn)};wz.cob.prototype.delz=function(){this.edel("mousemove",wz.p.dgz);this.edel("mousemove",wz.p.cpz);wz.x.winr("mousemove",wz.p.dgz,false);wz.x.winr("mousemove",wz.p.cpz,false)};wz.cob.prototype.iact=function(s,f){this.ar=s;this.cus(s);this.setoff();wz.cp.delz();this.eadd("mousemove",f);wz.x.wina("mousemove",f,false)};wz.p.wcw=function(v){var x=wz.lb.pi(v);wz.n.cw.value=x;if(x<wz.c.d.cw.mn||x>wz.c.d.cw.mx){wz.n.cw.style.color=wz.s.dc}else{wz.n.cw.style.color=wz.s.ic}};wz.p.wch=function(v){var x=wz.lb.pi(v);wz.n.ch.value=x;if(x<wz.c.d.ch.mn||x>wz.c.d.ch.mx){wz.n.ch.style.color=wz.s.sr}else{wz.n.ch.style.color=wz.s.ic}};wz.p.wb=function(w,h){wz.p.wcw(w);wz.p.wch(h)};wz.x.zid=function(){if(!wz.act)return;wz.p.zi(1)};wz.x.zod=function(){if(!wz.act)return;wz.p.zi(-1)};wz.x.zu=function(){wz.c.bd=0;wz.lb.istop()};wz.p.rcv=function(w,h){if(!wz.cp)return 0;wz.cp.cr.w=w;wz.cp.cr.h=h;if(wz.cp.xr.x1+wz.cp.xr.w>w){var m=wz.c.d.cw.mn;if(wz.cp.xr.x1>0){wz.cp.xr.x1=w-wz.cp.xr.w}else if(wz.cp.xr.w>=m){wz.cp.xr.w=w-wz.cp.xr.x1}else{wz.cp.xr.w=m;return 1}}if(wz.cp.xr.y1+wz.cp.xr.h>h){var m=wz.c.d.ch.mn;if(wz.cp.xr.y1>0){wz.cp.xr.y1=h-wz.cp.xr.h}else if(wz.cp.xr.h>=m){wz.cp.xr.h=h-wz.cp.xr.y1}else{wz.cp.xr.h=m;return 1}}wz.cp.mxy();wz.cp.db();wz.p.wb(wz.cp.xr.w,wz.cp.xr.h);return 1};wz.p.zi=function(t){wz.c.bd=1;if(wz.c.time){wz.lb.istop()}var ic=wz.rr;var b=wz.c.b[wz.et.cw].by;var mn=wz.c.d.size.mn;var mx=wz.c.d.size.mx;var by=b*t;var z=t;var v=0;function doit(w,h){wz.lb.ss(ic.e,w,h);wz.p.rcv(w,h);ic.dmx(w,h);wz.cp.zv=w}function act(ic,v){var d1=wz.lb.pi(wz.cp.zv)+v;var d2=ic.ovv(wz.et.size,d1,mn,mx);if(d2>=0){doit(d1,d2)}else{wz.lb.istop();return 0}return 1}if(!act(ic,by))return;var st=setTimeout(function(){if(wz.c.bd){wz.c.time=window.setInterval(function(){if(wz.c.bd){for(var i=0;i<b;++i){if(wz.c.bd){act(ic,z)}else{wz.lb.istop()}}}},10)}},90)};wz.p.r5o=function(xr,ic){var x1=xr.y1;var y1=ic.h-xr.x2();var w=xr.h;var h=xr.w;return new wz.rect(x1,y1,w,h)};wz.p.r10o=function(xr,ic){var x=ic.w-xr.x2();var y=ic.h-xr.y2();var w=xr.w;var h=xr.h;return new wz.rect(x,y,w,h)};wz.p.r15o=function(xr,ic){var x=ic.w-xr.h-xr.y1;var y=xr.x1;var w=xr.h;var h=xr.w;return new wz.rect(x,y,w,h)};wz.p.srs=function(ic,im,xr){var zz=new wz.rect(0,0,0,0);var wo=ic.o5w();var ho=ic.o5h();var dw=wz.lb.px(im.style.width);var dh=wz.lb.px(im.style.height);if(dw<=0||dh<=0){return 0}var er=ic.ew/dw;var eh=ic.eh/dh;zz.w=wz.lb.pi(xr.w*er);zz.h=wz.lb.pi(xr.h*eh);zz.x1=wz.lb.pi(xr.x1*er);zz.y1=wz.lb.pi(xr.y1*eh);var x=xr.x1;var x2=xr.x2();var y=xr.y1;var y2=xr.y2();var w=xr.w;var h=xr.h;var rw=0;var rh=0;var cr=new wz.rect(0,0,0,0);if(ic.co.w>0){rw=ic.co.w/dw;rh=ic.co.h/dh;if(ic.ri===.5||ic.ri===1.5){rw=ic.co.h/dw;rh=ic.co.w/dh}cr.x1=wz.lb.pi(ic.co.x1+x*rw);cr.y1=wz.lb.pi(ic.co.y1+y*rh);cr.w=wz.lb.pi(w*rw);cr.h=wz.lb.pi(h*rh);if(ic.ri===.5){cr.x1=wz.lb.pi(ic.h-ic.co.y2()+x*rw);cr.y1=wz.lb.pi(ic.co.x1+y*rh)}else if(ic.ri===1){cr.x1=wz.lb.pi(ic.w-ic.co.x2()+x*rw);cr.y1=wz.lb.pi(ic.h-ic.co.y2()+y*rh)}else if(ic.ri===1.5){cr.x1=wz.lb.pi(ic.co.y1+x*rw);cr.y1=wz.lb.pi(ic.w-ic.co.x2()+y*rh)}}else{rw=wo/dw;rh=ho/dh;cr.w=wz.lb.pi(w*rw);cr.h=wz.lb.pi(h*rh);cr.x1=wz.lb.pi(x*rw);cr.y1=wz.lb.pi(y*rh)}if(ic.ri===0){ic.co=cr}else if(ic.ri===.5){ic.co=wz.p.r5o(cr,ic)}else if(ic.ri===1){ic.co=wz.p.r10o(cr,ic)}else if(ic.ri===1.5){ic.co=wz.p.r15o(cr,ic)}if(ic.co.w>wo)ic.co.w=wo;if(ic.co.h>ho)ic.co.h=ho;if(zz.w>ic.ew)zz.w=ic.ew;if(zz.h>ic.eh)zz.h=ic.eh;wz.x.mx(ic);return zz};